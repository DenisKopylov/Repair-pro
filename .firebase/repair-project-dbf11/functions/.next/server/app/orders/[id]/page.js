(()=>{var e={};e.id=40,e.ids=[40],e.modules={132:()=>{},846:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},1971:()=>{},2340:()=>{},2429:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>r});let r=(0,s(3952).registerClientReference)(function(){throw Error("Attempted to call the default export of \"/home/user/repair-platform/apps/frontend/app/orders/[id]/page.tsx\" from the server, but it's on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"/home/user/repair-platform/apps/frontend/app/orders/[id]/page.tsx","default")},2984:(e,t,s)=>{"use strict";var r=s(860);s.o(r,"useParams")&&s.d(t,{useParams:function(){return r.useParams}}),s.o(r,"useRouter")&&s.d(t,{useRouter:function(){return r.useRouter}})},3033:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-unit-async-storage.external.js")},3295:e=>{"use strict";e.exports=require("next/dist/server/app-render/after-task-async-storage.external.js")},3873:e=>{"use strict";e.exports=require("path")},3988:(e,t,s)=>{Promise.resolve().then(s.bind(s,7387))},4132:(e,t,s)=>{Promise.resolve().then(s.bind(s,2429))},4356:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>o,metadata:()=>i});var r=s(8828);s(1971);var n=s(19),a=s.n(n);let i={title:"Create Next App",description:"Generated by create next app"};function o({children:e}){return(0,r.jsx)("html",{lang:"en",children:(0,r.jsx)("body",{className:a().className,children:e})})}},4394:(e,t,s)=>{"use strict";s.d(t,{A:()=>r});let r=(0,s(4667).A)("circle-x",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]])},4705:(e,t,s)=>{"use strict";s.r(t),s.d(t,{GlobalError:()=>i.a,__next_app__:()=>u,pages:()=>c,routeModule:()=>m,tree:()=>d});var r=s(4332),n=s(8819),a=s(7851),i=s.n(a),o=s(7540),l={};for(let e in o)0>["default","tree","pages","GlobalError","__next_app__","routeModule"].indexOf(e)&&(l[e]=()=>o[e]);s.d(t,l);let d={children:["",{children:["orders",{children:["[id]",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(s.bind(s,2429)),"/home/user/repair-platform/apps/frontend/app/orders/[id]/page.tsx"]}]},{}]},{}]},{layout:[()=>Promise.resolve().then(s.bind(s,4356)),"/home/user/repair-platform/apps/frontend/app/layout.tsx"],"not-found":[()=>Promise.resolve().then(s.t.bind(s,9033,23)),"next/dist/client/components/not-found-error"],forbidden:[()=>Promise.resolve().then(s.t.bind(s,9956,23)),"next/dist/client/components/forbidden-error"],unauthorized:[()=>Promise.resolve().then(s.t.bind(s,2341,23)),"next/dist/client/components/unauthorized-error"]}]}.children,c=["/home/user/repair-platform/apps/frontend/app/orders/[id]/page.tsx"],u={require:s,loadChunk:()=>Promise.resolve()},m=new r.AppPageRouteModule({definition:{kind:n.RouteKind.APP_PAGE,page:"/orders/[id]/page",pathname:"/orders/[id]",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:d}})},6181:(e,t,s)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"useMergedRef",{enumerable:!0,get:function(){return n}});let r=s(159);function n(e,t){let s=(0,r.useRef)(null),n=(0,r.useRef)(null);return(0,r.useCallback)(r=>{if(null===r){let e=s.current;e&&(s.current=null,e());let t=n.current;t&&(n.current=null,t())}else e&&(s.current=a(e,r)),t&&(n.current=a(t,r))},[e,t])}function a(e,t){if("function"!=typeof e)return e.current=t,()=>{e.current=null};{let s=e(t);return"function"==typeof s?s:()=>e(null)}}("function"==typeof t.default||"object"==typeof t.default&&null!==t.default)&&void 0===t.default.__esModule&&(Object.defineProperty(t.default,"__esModule",{value:!0}),Object.assign(t.default,t),e.exports=t.default)},7387:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>m});var r=s(3486),n=s(2984),a=s(5204),i=s(9933),o=s(159),l=s(5577),d=s(9438),c=s(4394);let u=e=>fetch(e,{cache:"no-store"}).then(e=>e.json());function m(){let{id:e}=(0,n.useParams)(),t=(0,n.useRouter)(),{data:s,isLoading:m}=(0,a.Ay)(`/orders/${e}`,u),[p,x]=(0,o.useState)(!1),h=async s=>{x(!0),await fetch(`/orders/${e}/confirm`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({ok:s})}),t.push("/orders")};return m||!s?(0,r.jsx)("div",{className:"flex justify-center items-center h-screen",children:(0,r.jsx)(l.A,{className:"animate-spin text-stone-400",size:48})}):(0,r.jsxs)("main",{className:"px-4 py-6 max-w-md mx-auto space-y-6",children:[(0,r.jsxs)("div",{className:"space-y-1",children:[(0,r.jsxs)("h1",{className:"text-2xl font-semibold",children:["Заказ #",s._id.slice(-6)]}),(0,r.jsx)("p",{className:"text-sm text-stone-500",children:"Просмотрите условия ремонта и примите решение."})]}),(0,r.jsxs)("div",{className:"bg-white rounded-xl shadow p-4 space-y-4",children:[(0,r.jsx)("div",{className:"w-full aspect-video bg-gray-100 rounded-md overflow-hidden",children:(0,r.jsx)(i.default,{src:s.images?.[0]||"/placeholder.png",alt:s.partType,width:800,height:450,className:"object-cover object-center"})}),(0,r.jsxs)("div",{className:"text-center",children:[(0,r.jsx)("p",{className:"font-medium",children:s.partType}),s.model&&(0,r.jsx)("p",{className:"text-xs text-stone-500 mt-1",children:s.model})]})]}),(0,r.jsxs)("div",{className:"bg-white rounded-xl shadow p-4 space-y-2",children:[(0,r.jsxs)("div",{className:"flex justify-between text-sm",children:[(0,r.jsx)("span",{className:"text-stone-600",children:"Цена дефектовки"}),(0,r.jsx)("span",{className:"font-medium",children:null!=s.defectPrice?`${s.defectPrice} ₽`:"—"})]}),(0,r.jsx)("div",{className:"border-t border-stone-200"}),(0,r.jsxs)("div",{className:"flex justify-between text-sm pt-2",children:[(0,r.jsx)("span",{className:"text-stone-600",children:"Цена ремонта"}),(0,r.jsx)("span",{className:"font-medium",children:null!=s.repairPrice?`${s.repairPrice} ₽`:"—"})]}),(0,r.jsx)("div",{className:"border-t border-stone-200"}),(0,r.jsxs)("div",{className:"flex justify-between text-sm pt-2",children:[(0,r.jsx)("span",{className:"text-stone-600",children:"Срок работы"}),(0,r.jsx)("span",{className:"font-medium",children:null!=s.workHours?`${s.workHours} ч`:"—"})]})]}),(0,r.jsxs)("div",{className:"bg-white rounded-xl shadow p-4 space-y-2",children:[(0,r.jsx)("h2",{className:"text-sm font-medium",children:"Информация о заказе"}),(0,r.jsxs)("div",{className:"flex justify-between text-sm",children:[(0,r.jsx)("span",{className:"text-stone-600",children:"Создан"}),(0,r.jsx)("span",{className:"font-medium",children:new Date(s.createdAt).toLocaleDateString("ru",{day:"2-digit",month:"long",year:"numeric"})})]}),(0,r.jsx)("div",{className:"border-t border-stone-200"}),(0,r.jsxs)("div",{className:"flex justify-between text-sm pt-2",children:[(0,r.jsx)("span",{className:"text-stone-600",children:"Статус"}),(0,r.jsx)("span",{className:"inline-flex items-center gap-1 text-xs font-medium py-1 px-2 rounded-full bg-gray-100 text-gray-700",children:function(e){switch(e){case"NEW":return"Новый";case"OFFERED":return"Ожидает решения";case"CONFIRMED":return"Подтверждён";case"DECLINED":return"Отказ";case"IN_PROGRESS":return"В работе";case"DONE":return"Готов";default:return e}}(s.status)})]})]}),"OFFERED"===s.status&&(0,r.jsxs)("div",{className:"space-y-3",children:[(0,r.jsxs)("button",{disabled:p,onClick:()=>h(!0),className:"w-full flex items-center justify-center gap-2 bg-green-600 hover:bg-green-700 text-white rounded-md py-3 text-sm font-semibold transition",children:[p?(0,r.jsx)(l.A,{className:"animate-spin text-white",size:16}):(0,r.jsx)(d.A,{size:16}),"Согласиться"]}),(0,r.jsxs)("button",{disabled:p,onClick:()=>h(!1),className:"w-full flex items-center justify-center gap-2 border border-red-600 text-red-600 rounded-md py-3 text-sm font-semibold transition",children:[p?(0,r.jsx)(l.A,{className:"animate-spin text-red-600",size:16}):(0,r.jsx)(c.A,{size:16}),"Отказаться"]})]})]})}},7891:(e,t,s)=>{Promise.resolve().then(s.t.bind(s,385,23)),Promise.resolve().then(s.t.bind(s,3737,23)),Promise.resolve().then(s.t.bind(s,6081,23)),Promise.resolve().then(s.t.bind(s,1904,23)),Promise.resolve().then(s.t.bind(s,5856,23)),Promise.resolve().then(s.t.bind(s,5492,23)),Promise.resolve().then(s.t.bind(s,9082,23)),Promise.resolve().then(s.t.bind(s,5812,23))},8219:(e,t,s)=>{Promise.resolve().then(s.t.bind(s,9355,23)),Promise.resolve().then(s.t.bind(s,4439,23)),Promise.resolve().then(s.t.bind(s,7851,23)),Promise.resolve().then(s.t.bind(s,4730,23)),Promise.resolve().then(s.t.bind(s,9774,23)),Promise.resolve().then(s.t.bind(s,3170,23)),Promise.resolve().then(s.t.bind(s,968,23)),Promise.resolve().then(s.t.bind(s,8298,23))},9121:e=>{"use strict";e.exports=require("next/dist/server/app-render/action-async-storage.external.js")},9294:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-async-storage.external.js")},9438:(e,t,s)=>{"use strict";s.d(t,{A:()=>r});let r=(0,s(4667).A)("circle-check",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]])}};var t=require("../../../webpack-runtime.js");t.C(e);var s=e=>t(t.s=e),r=t.X(0,[421,588,933],()=>s(4705));module.exports=r})();