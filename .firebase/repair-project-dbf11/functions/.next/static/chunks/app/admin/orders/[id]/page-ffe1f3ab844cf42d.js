(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[124],{430:(e,s,t)=>{Promise.resolve().then(t.bind(t,1557))},1557:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>g});var l=t(4568),a=t(2942),r=t(7753),n=t(7620),o=t(7261),i=t.n(o),c=t(1773),d=t(9369),u=t(8276),m=t(8889);let h=(0,m.A)("camera",[["path",{d:"M14.5 4h-5L7 7H4a2 2 0 0 0-2 2v9a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2h-3l-2.5-3z",key:"1tc9qg"}],["circle",{cx:"12",cy:"13",r:"3",key:"1vg3eu"}]]);var x=t(6440),f=t(8961);let p=(0,m.A)("eye-off",[["path",{d:"M10.733 5.076a10.744 10.744 0 0 1 11.205 6.575 1 1 0 0 1 0 .696 10.747 10.747 0 0 1-1.444 2.49",key:"ct8e1f"}],["path",{d:"M14.084 14.158a3 3 0 0 1-4.242-4.242",key:"151rxh"}],["path",{d:"M17.479 17.499a10.75 10.75 0 0 1-15.417-5.151 1 1 0 0 1 0-.696 10.75 10.75 0 0 1 4.446-5.143",key:"13bj9a"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]]),b=e=>fetch(e,{cache:"no-store"}).then(e=>e.json());function g(){let{id:e}=(0,a.useParams)(),s=(0,a.useRouter)(),{data:t,isLoading:o}=(0,r.Ay)("/orders/".concat(e),b),[m,g]=(0,n.useState)(""),[v,y]=(0,n.useState)(""),[j,N]=(0,n.useState)(""),[k,w]=(0,n.useState)("");(0,n.useEffect)(()=>{if(t){var e,s,l,a,r,n,o,i;g(null!=(r=null==(e=t.defectPrice)?void 0:e.toString())?r:""),y(null!=(n=null==(s=t.repairPrice)?void 0:s.toString())?n:""),N(null!=(o=null==(l=t.workHours)?void 0:l.toString())?o:""),w(null!=(i=null==(a=t.internalCost)?void 0:a.toString())?i:"")}},[t]);let A=async()=>{await fetch("/orders/".concat(e),{method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify({defectPrice:Number(m),repairPrice:Number(v),workHours:Number(j)})}),s.push("/admin/orders")};return o||!t?(0,l.jsx)("div",{className:"flex justify-center items-center h-screen",children:(0,l.jsx)(d.A,{className:"animate-spin text-stone-500",size:48})}):(0,l.jsxs)("main",{className:"p-4 max-w-md mx-auto space-y-6",children:[(0,l.jsxs)("div",{className:"flex items-center gap-2",children:[(0,l.jsx)(i(),{href:"/admin/orders",className:"text-stone-600 hover:text-stone-800",children:(0,l.jsx)(u.A,{size:20})}),(0,l.jsxs)("h1",{className:"text-lg font-semibold",children:["Заказ #",t._id.slice(-6)]})]}),(0,l.jsxs)("div",{children:[(0,l.jsx)("label",{className:"block text-sm font-medium mb-2",children:"Изображение детали"}),t.images&&t.images.length>0?(0,l.jsx)("div",{className:"w-full aspect-video rounded-lg overflow-hidden bg-gray-100",children:(0,l.jsx)(c.default,{src:t.images[0],alt:"Part Image",width:800,height:450,className:"object-cover object-center"})}):(0,l.jsx)("div",{className:"w-full aspect-video rounded-lg bg-gray-100 flex items-center justify-center text-gray-400",children:"Нет изображения"})]}),(0,l.jsxs)("div",{children:[(0,l.jsx)("label",{className:"block text-sm font-medium mb-1",children:"Цена дефектовки"}),(0,l.jsxs)("div",{className:"relative rounded-md shadow-sm",children:[(0,l.jsx)("div",{className:"pointer-events-none absolute inset-y-0 left-0 pl-3 flex items-center text-gray-400",children:(0,l.jsx)(h,{size:16})}),(0,l.jsx)("input",{type:"number",value:m,onChange:e=>g(e.target.value),className:"block w-full pl-10 pr-3 py-2 border rounded-md focus:outline-none focus:ring-2 focus:ring-orange-500 focus:border-orange-500 sm:text-sm",placeholder:"0"})]})]}),(0,l.jsxs)("div",{children:[(0,l.jsx)("label",{className:"block text-sm font-medium mb-1",children:"Цена ремонта"}),(0,l.jsxs)("div",{className:"relative rounded-md shadow-sm",children:[(0,l.jsx)("div",{className:"pointer-events-none absolute inset-y-0 left-0 pl-3 flex items-center text-gray-400",children:(0,l.jsx)(x.A,{size:16})}),(0,l.jsx)("input",{type:"number",value:v,onChange:e=>y(e.target.value),className:"block w-full pl-10 pr-3 py-2 border rounded-md focus:outline-none focus:ring-2 focus:ring-orange-500 focus:border-orange-500 sm:text-sm",placeholder:"0"})]})]}),(0,l.jsxs)("div",{children:[(0,l.jsx)("label",{className:"block text-sm font-medium mb-1",children:"Время работы (часы)"}),(0,l.jsxs)("div",{className:"relative rounded-md shadow-sm",children:[(0,l.jsx)("div",{className:"pointer-events-none absolute inset-y-0 left-0 pl-3 flex items-center text-gray-400",children:(0,l.jsx)(f.A,{size:16})}),(0,l.jsx)("input",{type:"number",value:j,onChange:e=>N(e.target.value),className:"block w-full pl-10 pr-3 py-2 border rounded-md focus:outline-none focus:ring-2 focus:ring-orange-500 focus:border-orange-500 sm:text-sm",placeholder:"0"})]})]}),(0,l.jsxs)("div",{children:[(0,l.jsx)("label",{className:"block text-sm font-medium mb-1",children:"Внутренняя стоимость"}),(0,l.jsxs)("div",{className:"relative rounded-md shadow-sm",children:[(0,l.jsx)("div",{className:"pointer-events-none absolute inset-y-0 left-0 pl-3 flex items-center text-gray-400",children:(0,l.jsx)(p,{size:16})}),(0,l.jsx)("input",{type:"text",value:k,disabled:!0,className:"block w-full pl-10 pr-3 py-2 border rounded-md bg-stone-100 text-gray-500 sm:text-sm",placeholder:"Недоступно"})]})]}),(0,l.jsx)("button",{onClick:A,className:"w-full bg-orange-500 hover:bg-orange-600 text-white rounded-md py-3 text-sm font-semibold transition",children:"Сохранить"})]})}},2942:(e,s,t)=>{"use strict";var l=t(2418);t.o(l,"useParams")&&t.d(s,{useParams:function(){return l.useParams}}),t.o(l,"useRouter")&&t.d(s,{useRouter:function(){return l.useRouter}})},6440:(e,s,t)=>{"use strict";t.d(s,{A:()=>l});let l=(0,t(8889).A)("wrench",[["path",{d:"M14.7 6.3a1 1 0 0 0 0 1.4l1.6 1.6a1 1 0 0 0 1.4 0l3.77-3.77a6 6 0 0 1-7.94 7.94l-6.91 6.91a2.12 2.12 0 0 1-3-3l6.91-6.91a6 6 0 0 1 7.94-7.94l-3.76 3.76z",key:"cbrjhi"}]])},8276:(e,s,t)=>{"use strict";t.d(s,{A:()=>l});let l=(0,t(8889).A)("arrow-left",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]])},8961:(e,s,t)=>{"use strict";t.d(s,{A:()=>l});let l=(0,t(8889).A)("clock-3",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16.5 12",key:"1aq6pp"}]])}},e=>{var s=s=>e(e.s=s);e.O(0,[261,801,773,587,315,358],()=>s(430)),_N_E=e.O()}]);