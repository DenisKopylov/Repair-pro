(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[798],{508:(e,a,t)=>{Promise.resolve().then(t.bind(t,5580))},1356:(e,a,t)=>{"use strict";t.d(a,{A:()=>l});let l=(0,t(8889).A)("circle-x",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]])},1778:(e,a,t)=>{"use strict";t.d(a,{A:()=>l});let l=(0,t(8889).A)("sparkles",[["path",{d:"M9.937 15.5A2 2 0 0 0 8.5 14.063l-6.135-1.582a.5.5 0 0 1 0-.962L8.5 9.936A2 2 0 0 0 9.937 8.5l1.582-6.135a.5.5 0 0 1 .963 0L14.063 8.5A2 2 0 0 0 15.5 9.937l6.135 1.581a.5.5 0 0 1 0 .964L15.5 14.063a2 2 0 0 0-1.437 1.437l-1.582 6.135a.5.5 0 0 1-.963 0z",key:"4pj2yx"}],["path",{d:"M20 3v4",key:"1olli1"}],["path",{d:"M22 5h-4",key:"1gvqau"}],["path",{d:"M4 17v2",key:"vumght"}],["path",{d:"M5 18H3",key:"zchphs"}]])},5580:(e,a,t)=>{"use strict";t.r(a),t.d(a,{default:()=>f});var l=t(4568),s=t(7620),n=t(7753),r=t(7261),i=t.n(r),c=t(1778),u=t(8961),o=t(8889);let d=(0,o.A)("circle-check-big",[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);var x=t(1356),p=t(9369);let m=(0,o.A)("shield-check",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]]),h=e=>t.e(262).then(t.bind(t,6262)).then(a=>{let{fetchWithAuth:t}=a;return t(e,{cache:"no-store"}).then(e=>e.json())}),v={NEW:"bg-stone-200 text-stone-700",OFFERED:"bg-yellow-100 text-yellow-700",IN_PROGRESS:"bg-primary-50 text-primary-600",DONE:"bg-green-100 text-green-700",DECLINED:"bg-stone-300 text-stone-600"},y={NEW:(0,l.jsx)(c.A,{size:16}),OFFERED:(0,l.jsx)(u.A,{size:16}),IN_PROGRESS:(0,l.jsx)(u.A,{size:16}),DONE:(0,l.jsx)(d,{size:16}),DECLINED:(0,l.jsx)(x.A,{size:16}),DEFAULT:(0,l.jsx)(u.A,{size:16})},g=[{value:"",label:"Все статусы"},{value:"NEW",label:"Новый"},{value:"OFFERED",label:"Ожидает решения"},{value:"DECLINED",label:"Отказ"},{value:"CONFIRMED",label:"Подтверждён"},{value:"IN_PROGRESS",label:"В работе"},{value:"DONE",label:"Готов"}],b=[{value:"",label:"Все детали"},{value:"Генератор",label:"Генератор"},{value:"Стартер",label:"Стартер"},{value:"ТНВД",label:"ТНВД"},{value:"Форсунки",label:"Форсунки"},{value:"Гидроцилиндр",label:"Гидроцилиндр"},{value:"Гидрораспределитель",label:"Гидрораспределитель"},{value:"Гидронасос",label:"Гидронасос"},{value:"Гидромотор",label:"Гидромотор"}];function f(){let[e,a]=(0,s.useState)(""),[t,r]=(0,s.useState)(""),[c,u]=(0,s.useState)(""),[o,d]=(0,s.useState)(""),[x,f]=(0,s.useState)(""),N=(0,s.useMemo)(()=>{let a=new URLSearchParams({all:"true"});return e.trim()&&a.set("search",e.trim()),t&&a.set("status",t),c&&a.set("partType",c),o&&a.set("from",o),x&&a.set("to",x),"/orders?".concat(a.toString())},[e,t,c,o,x]),{data:j,isLoading:E}=(0,n.Ay)(N,h);return E?(0,l.jsx)("div",{className:"flex justify-center mt-20",children:(0,l.jsx)(p.A,{className:"animate-spin text-stone-500"})}):(0,l.jsxs)("main",{className:"p-4 pb-24 max-w-md mx-auto",children:[(0,l.jsxs)("h1",{className:"text-xl font-semibold mb-4 flex items-center gap-2",children:[(0,l.jsx)(m,{size:18})," Заказы сервис-центров"]}),(0,l.jsxs)("div",{className:"space-y-3 mb-6",children:[(0,l.jsx)("input",{type:"text",value:e,onChange:e=>{a(e.target.value)},placeholder:"Поиск по названию сервиса или ID",className:"w-full border rounded px-3 py-2 text-sm focus:outline-none focus:ring-2 focus:ring-primary-600"}),(0,l.jsxs)("div",{className:"flex gap-2",children:[(0,l.jsx)("select",{value:t,onChange:e=>{r(e.target.value)},className:"flex-1 border rounded px-3 py-2 text-sm focus:outline-none focus:ring-2 focus:ring-primary-600",children:g.map(e=>(0,l.jsx)("option",{value:e.value,children:e.label},e.value))}),(0,l.jsx)("select",{value:c,onChange:e=>{u(e.target.value)},className:"flex-1 border rounded px-3 py-2 text-sm focus:outline-none focus:ring-2 focus:ring-primary-600",children:b.map(e=>(0,l.jsx)("option",{value:e.value,children:e.label},e.value))})]}),(0,l.jsxs)("div",{className:"flex gap-2",children:[(0,l.jsx)("input",{type:"date",value:o,onChange:e=>{d(e.target.value)},className:"flex-1 border rounded px-3 py-2 text-sm focus:outline-none focus:ring-2 focus:ring-primary-600"}),(0,l.jsx)("input",{type:"date",value:x,onChange:e=>{f(e.target.value)},className:"flex-1 border rounded px-3 py-2 text-sm focus:outline-none focus:ring-2 focus:ring-primary-600"})]})]}),null==j?void 0:j.map(e=>(0,l.jsx)(i(),{href:"/admin/orders/".concat(e._id),className:"block bg-white shadow rounded-xl p-4 mb-5 ring-1 ring-stone-200 hover:ring-primary-600/60 transition",children:(0,l.jsxs)("div",{className:"flex items-start justify-between gap-3",children:[(0,l.jsxs)("div",{className:"space-y-1",children:[(0,l.jsx)("p",{className:"font-medium leading-tight",children:e.clientName}),(0,l.jsxs)("p",{className:"text-xs text-gray-500",children:["#",e._id.slice(-6)]}),(0,l.jsx)("p",{className:"text-sm text-stone-700 mt-1",children:e.partType}),(0,l.jsxs)("p",{className:"text-xs text-stone-400",children:["Создан: ",new Date(e.createdAt).toLocaleDateString("ru-RU")]})]}),(0,l.jsxs)("span",{className:"inline-flex items-center gap-1 text-xs px-2 py-1 rounded-full ".concat(v[e.status]),children:[y[e.status],e.status.replace("_"," ")]})]})},e._id)),!(null==j?void 0:j.length)&&(0,l.jsx)("p",{className:"text-center text-stone-500 mt-10",children:"Нет заказов"})]})}},8961:(e,a,t)=>{"use strict";t.d(a,{A:()=>l});let l=(0,t(8889).A)("clock-3",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16.5 12",key:"1aq6pp"}]])}},e=>{var a=a=>e(e.s=a);e.O(0,[261,801,587,315,358],()=>a(508)),_N_E=e.O()}]);