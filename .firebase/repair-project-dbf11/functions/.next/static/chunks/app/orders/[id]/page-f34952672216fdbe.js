(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[40],{1356:(e,s,t)=>{"use strict";t.d(s,{A:()=>n});let n=(0,t(8889).A)("circle-x",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]])},2942:(e,s,t)=>{"use strict";var n=t(2418);t.o(n,"useParams")&&t.d(s,{useParams:function(){return n.useParams}}),t.o(n,"useRouter")&&t.d(s,{useRouter:function(){return n.useRouter}})},3469:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>m});var n=t(4568),r=t(2942),a=t(7753),c=t(1773),l=t(7620),i=t(9369),d=t(5344),u=t(1356);let o=e=>fetch(e,{cache:"no-store"}).then(e=>e.json());function m(){var e;let{id:s}=(0,r.useParams)(),t=(0,r.useRouter)(),{data:m,isLoading:x}=(0,a.Ay)("/orders/".concat(s),o),[f,h]=(0,l.useState)(!1),p=async e=>{h(!0),await fetch("/orders/".concat(s,"/confirm"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({ok:e})}),t.push("/orders")};return x||!m?(0,n.jsx)("div",{className:"flex justify-center items-center h-screen",children:(0,n.jsx)(i.A,{className:"animate-spin text-stone-400",size:48})}):(0,n.jsxs)("main",{className:"px-4 py-6 max-w-md mx-auto space-y-6",children:[(0,n.jsxs)("div",{className:"space-y-1",children:[(0,n.jsxs)("h1",{className:"text-2xl font-semibold",children:["Заказ #",m._id.slice(-6)]}),(0,n.jsx)("p",{className:"text-sm text-stone-500",children:"Просмотрите условия ремонта и примите решение."})]}),(0,n.jsxs)("div",{className:"bg-white rounded-xl shadow p-4 space-y-4",children:[(0,n.jsx)("div",{className:"w-full aspect-video bg-gray-100 rounded-md overflow-hidden",children:(0,n.jsx)(c.default,{src:(null==(e=m.images)?void 0:e[0])||"/placeholder.png",alt:m.partType,width:800,height:450,className:"object-cover object-center"})}),(0,n.jsxs)("div",{className:"text-center",children:[(0,n.jsx)("p",{className:"font-medium",children:m.partType}),m.model&&(0,n.jsx)("p",{className:"text-xs text-stone-500 mt-1",children:m.model})]})]}),(0,n.jsxs)("div",{className:"bg-white rounded-xl shadow p-4 space-y-2",children:[(0,n.jsxs)("div",{className:"flex justify-between text-sm",children:[(0,n.jsx)("span",{className:"text-stone-600",children:"Цена дефектовки"}),(0,n.jsx)("span",{className:"font-medium",children:null!=m.defectPrice?"".concat(m.defectPrice," ₽"):"—"})]}),(0,n.jsx)("div",{className:"border-t border-stone-200"}),(0,n.jsxs)("div",{className:"flex justify-between text-sm pt-2",children:[(0,n.jsx)("span",{className:"text-stone-600",children:"Цена ремонта"}),(0,n.jsx)("span",{className:"font-medium",children:null!=m.repairPrice?"".concat(m.repairPrice," ₽"):"—"})]}),(0,n.jsx)("div",{className:"border-t border-stone-200"}),(0,n.jsxs)("div",{className:"flex justify-between text-sm pt-2",children:[(0,n.jsx)("span",{className:"text-stone-600",children:"Срок работы"}),(0,n.jsx)("span",{className:"font-medium",children:null!=m.workHours?"".concat(m.workHours," ч"):"—"})]})]}),(0,n.jsxs)("div",{className:"bg-white rounded-xl shadow p-4 space-y-2",children:[(0,n.jsx)("h2",{className:"text-sm font-medium",children:"Информация о заказе"}),(0,n.jsxs)("div",{className:"flex justify-between text-sm",children:[(0,n.jsx)("span",{className:"text-stone-600",children:"Создан"}),(0,n.jsx)("span",{className:"font-medium",children:new Date(m.createdAt).toLocaleDateString("ru",{day:"2-digit",month:"long",year:"numeric"})})]}),(0,n.jsx)("div",{className:"border-t border-stone-200"}),(0,n.jsxs)("div",{className:"flex justify-between text-sm pt-2",children:[(0,n.jsx)("span",{className:"text-stone-600",children:"Статус"}),(0,n.jsx)("span",{className:"inline-flex items-center gap-1 text-xs font-medium py-1 px-2 rounded-full bg-gray-100 text-gray-700",children:function(e){switch(e){case"NEW":return"Новый";case"OFFERED":return"Ожидает решения";case"CONFIRMED":return"Подтверждён";case"DECLINED":return"Отказ";case"IN_PROGRESS":return"В работе";case"DONE":return"Готов";default:return e}}(m.status)})]})]}),"OFFERED"===m.status&&(0,n.jsxs)("div",{className:"space-y-3",children:[(0,n.jsxs)("button",{disabled:f,onClick:()=>p(!0),className:"w-full flex items-center justify-center gap-2 bg-green-600 hover:bg-green-700 text-white rounded-md py-3 text-sm font-semibold transition",children:[f?(0,n.jsx)(i.A,{className:"animate-spin text-white",size:16}):(0,n.jsx)(d.A,{size:16}),"Согласиться"]}),(0,n.jsxs)("button",{disabled:f,onClick:()=>p(!1),className:"w-full flex items-center justify-center gap-2 border border-red-600 text-red-600 rounded-md py-3 text-sm font-semibold transition",children:[f?(0,n.jsx)(i.A,{className:"animate-spin text-red-600",size:16}):(0,n.jsx)(u.A,{size:16}),"Отказаться"]})]})]})}},4044:(e,s,t)=>{Promise.resolve().then(t.bind(t,3469))},5344:(e,s,t)=>{"use strict";t.d(s,{A:()=>n});let n=(0,t(8889).A)("circle-check",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]])},7849:(e,s,t)=>{"use strict";Object.defineProperty(s,"__esModule",{value:!0}),Object.defineProperty(s,"useMergedRef",{enumerable:!0,get:function(){return r}});let n=t(7620);function r(e,s){let t=(0,n.useRef)(null),r=(0,n.useRef)(null);return(0,n.useCallback)(n=>{if(null===n){let e=t.current;e&&(t.current=null,e());let s=r.current;s&&(r.current=null,s())}else e&&(t.current=a(e,n)),s&&(r.current=a(s,n))},[e,s])}function a(e,s){if("function"!=typeof e)return e.current=s,()=>{e.current=null};{let t=e(s);return"function"==typeof t?t:()=>e(null)}}("function"==typeof s.default||"object"==typeof s.default&&null!==s.default)&&void 0===s.default.__esModule&&(Object.defineProperty(s.default,"__esModule",{value:!0}),Object.assign(s.default,s),e.exports=s.default)}},e=>{var s=s=>e(e.s=s);e.O(0,[801,773,587,315,358],()=>s(4044)),_N_E=e.O()}]);