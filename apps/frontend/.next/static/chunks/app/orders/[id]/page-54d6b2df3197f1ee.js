(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[40],{1356:(e,s,t)=>{"use strict";t.d(s,{A:()=>a});let a=(0,t(8889).A)("circle-x",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]])},2942:(e,s,t)=>{"use strict";var a=t(2418);t.o(a,"useParams")&&t.d(s,{useParams:function(){return a.useParams}}),t.o(a,"useRouter")&&t.d(s,{useRouter:function(){return a.useRouter}})},3469:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>x});var a=t(4568),r=t(2942),c=t(7753),n=t(1773),i=t(7620),l=t(9369),d=t(5344),m=t(1356);let o=e=>fetch(e,{cache:"no-store"}).then(e=>e.json());function x(){var e;let{id:s}=(0,r.useParams)(),t=(0,r.useRouter)(),{data:x,isLoading:u}=(0,c.Ay)("/orders/".concat(s),o),[h,p]=(0,i.useState)(!1),j=async e=>{p(!0),await fetch("/orders/".concat(s,"/confirm"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({ok:e})}),t.push("/orders")};return u||!x?(0,a.jsx)("div",{className:"flex justify-center items-center h-screen",children:(0,a.jsx)(l.A,{className:"animate-spin text-stone-400",size:48})}):(0,a.jsxs)("main",{className:"px-4 py-6 max-w-md mx-auto space-y-6",children:[(0,a.jsxs)("div",{className:"space-y-1",children:[(0,a.jsxs)("h1",{className:"text-2xl font-semibold",children:["Заказ #",x._id.slice(-6)]}),(0,a.jsx)("p",{className:"text-sm text-stone-500",children:"Просмотрите условия ремонта и примите решение."})]}),(0,a.jsxs)("div",{className:"bg-white rounded-xl shadow p-4 space-y-4",children:[(0,a.jsx)("div",{className:"w-full aspect-video bg-gray-100 rounded-md overflow-hidden",children:(0,a.jsx)(n.default,{src:(null==(e=x.images)?void 0:e[0])||"/placeholder.png",alt:x.partType,width:800,height:450,className:"object-cover object-center"})}),(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)("p",{className:"font-medium",children:x.partType}),x.model&&(0,a.jsx)("p",{className:"text-xs text-stone-500 mt-1",children:x.model})]})]}),(0,a.jsxs)("div",{className:"bg-white rounded-xl shadow p-4 space-y-2",children:[(0,a.jsxs)("div",{className:"flex justify-between text-sm",children:[(0,a.jsx)("span",{className:"text-stone-600",children:"Цена дефектовки"}),(0,a.jsx)("span",{className:"font-medium",children:null!=x.defectPrice?"".concat(x.defectPrice," ₽"):"—"})]}),(0,a.jsx)("div",{className:"border-t border-stone-200"}),(0,a.jsxs)("div",{className:"flex justify-between text-sm pt-2",children:[(0,a.jsx)("span",{className:"text-stone-600",children:"Цена ремонта"}),(0,a.jsx)("span",{className:"font-medium",children:null!=x.repairPrice?"".concat(x.repairPrice," ₽"):"—"})]}),(0,a.jsx)("div",{className:"border-t border-stone-200"}),(0,a.jsxs)("div",{className:"flex justify-between text-sm pt-2",children:[(0,a.jsx)("span",{className:"text-stone-600",children:"Срок работы"}),(0,a.jsx)("span",{className:"font-medium",children:null!=x.workHours?"".concat(x.workHours," ч"):"—"})]})]}),(0,a.jsxs)("div",{className:"bg-white rounded-xl shadow p-4 space-y-2",children:[(0,a.jsx)("h2",{className:"text-sm font-medium",children:"Информация о заказе"}),(0,a.jsxs)("div",{className:"flex justify-between text-sm",children:[(0,a.jsx)("span",{className:"text-stone-600",children:"Создан"}),(0,a.jsx)("span",{className:"font-medium",children:new Date(x.createdAt).toLocaleDateString("ru",{day:"2-digit",month:"long",year:"numeric"})})]}),(0,a.jsx)("div",{className:"border-t border-stone-200"}),(0,a.jsxs)("div",{className:"flex justify-between text-sm pt-2",children:[(0,a.jsx)("span",{className:"text-stone-600",children:"Статус"}),(0,a.jsx)("span",{className:"inline-flex items-center gap-1 text-xs font-medium py-1 px-2 rounded-full bg-gray-100 text-gray-700",children:function(e){switch(e){case"NEW":return"Новый";case"OFFERED":return"Ожидает решения";case"CONFIRMED":return"Подтверждён";case"DECLINED":return"Отказ";case"IN_PROGRESS":return"В работе";case"DONE":return"Готов";default:return e}}(x.status)})]})]}),"OFFERED"===x.status&&(0,a.jsxs)("div",{className:"space-y-3",children:[(0,a.jsxs)("button",{disabled:h,onClick:()=>j(!0),className:"w-full flex items-center justify-center gap-2 bg-green-600 hover:bg-green-700 text-white rounded-md py-3 text-sm font-semibold transition",children:[h?(0,a.jsx)(l.A,{className:"animate-spin text-white",size:16}):(0,a.jsx)(d.A,{size:16}),"Согласиться"]}),(0,a.jsxs)("button",{disabled:h,onClick:()=>j(!1),className:"w-full flex items-center justify-center gap-2 border border-red-600 text-red-600 rounded-md py-3 text-sm font-semibold transition",children:[h?(0,a.jsx)(l.A,{className:"animate-spin text-red-600",size:16}):(0,a.jsx)(m.A,{size:16}),"Отказаться"]})]})]})}},4044:(e,s,t)=>{Promise.resolve().then(t.bind(t,3469))},5344:(e,s,t)=>{"use strict";t.d(s,{A:()=>a});let a=(0,t(8889).A)("circle-check",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]])}},e=>{var s=s=>e(e.s=s);e.O(0,[945,773,587,315,358],()=>s(4044)),_N_E=e.O()}]);